---
push_repos:
  # Dev Only
  gitlab-internal:
    only_if: NV_CI_INTERNAL
    # WARNING: Set your user creds if debugging. Password should not be set in this file! It should be stored in
    # ~/.docker/config.json on the machine where this command is running.
    # user: jesusa
    # pass: flimflam
    user: "gitlab-ci-token"
    pass: CI_JOB_TOKEN
    registry:
      x86_64: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ppc64le: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      arm64: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
  # Staging
  artifactory:
    only_if: NV_ARTIFACTORY
    user: ARTIFACTORY_USER
    pass: ARTIFACTORY_PASS
    registry:
      x86_64: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda
      ppc64le: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda/cuda-ppc64le
      arm64: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda/cuda-arm64
  # EA and GA
  nvcr.io:
    only_if: NVCR_TOKEN
    pass: NVCR_TOKEN
    user: $oauthtoken
    registry:
      x86_64: nvcr.io/nvidia/cuda
  # GA only
  docker.io:
    # Will only use this repo if the REGISTRY_TOKEN environment variable is set
    only_if: REGISTRY_TOKEN
    pass: REGISTRY_TOKEN
    user: REGISTRY_USER
    registry:
      x86_64: nvidia/cuda
      ppc64le: nvidia/cuda-ppc64le
      arm64: nvidia/cuda-arm64

.requires_v11.0: &cuda11_0_requires
  requires: "cuda>=11.0 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441"

.components_v11.0: &cuda11_0_components
  build_version: 171
  cudart:
    version: 11.0.171-1
  cudart_dev:
    version: 11.0.171-1
  nvml_dev:
    version: 11.0.167-1
  command_line_tools:
    version: 11.0.1-1
  libcublas_dev:
    version: 11.0.0.191-1
  libnpp:
    version: 11.0.0.191-1
  libnpp_dev:
    version: 11.0.0.191-1
  libraries:
    version: 11.0.1-1
  libraries_dev:
    version: 11.0.1-1
  minimal_build:
    version: 11.0.1-1
  nvtx:
    version: 11.0.167-1
  libcusparse:
    version: 11.0.0.191-1
  libcusparse_dev:
    version: 11.0.0.191-1

cuda_v11.0:
  dist_base_path: dist/11.0
  ubuntu18.04:
    template_path: templates/ubuntu
    # skip_tests: True
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: ubuntu:18.04
      latest: True
      no_os_suffix: True
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 68558bfa5d1dd6d0300dacaea6ad66ed516ea7dfea01343bd552e6efa107b44c
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-x64/libcudnn8_8.0.0.180-1+cuda11.0_amd64.deb
          dev:
            sha256sum: 8d5430c00d698c2695f4025a0a07975beaecd6c37c8c494acac112977776e332
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-x64/libcudnn8-dev_8.0.0.180-1+cuda11.0_amd64.deb
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz
    # # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    # arm64:
    #   base_image: arm64v8/ubuntu:18.04
    #   latest: True
    #   no_os_suffix: True
    #   requires: "cuda>=11.0"
    #   exclude_repos:
    #     - nvcr.io
    #   components:
    #     <<: *cuda11_0_components
    #     # cudnn8:
    #     #   version: 8.0.0.180
    #     #   sha256sum:
    #     #   source:
    #     #   dev:
    #     #     sha256sum:
    #     #     source:
    #     libnccl2:
    #       version: 2.7.3
    #       sha256sum: eebbaf4d040a0254e1cb9cc23ed46a1ed37fba3686e9d86d541f5b3aa43c0ecb
    #       source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_aarch64.txz
    # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    ppc64le:
      base_image: ppc64le/ubuntu:18.04
      latest: True
      no_os_suffix: True
      requires: "cuda>=11.0"
      exclude_repos:
        - nvcr.io
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 183b750f59cb3eec960dbaf61b9cde1e88621771058a13ce93d5f609d995206d
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-ppc64le/libcudnn8_8.0.0.180-1+cuda11.0_ppc64el.deb
          dev:
            sha256sum: 7f8f8fd0d320899db03494585f60b22e08f792cf46a1c2e6834e493e2fd004fc
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-ppc64le/libcudnn8-dev_8.0.0.180-1+cuda11.0_ppc64el.deb
        libnccl2:
          version: 2.7.3
          sha256sum: 8486ac373c246f2468c55788597da2eb3b195f5fcdfaf4c3832c78c2849207ee
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_ppc64le.txz
  ubuntu16.04:
    template_path: templates/ubuntu
    # skip_tests: True
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: ubuntu:16.04
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: fe73570450ae4061d7946d28d3653b32357d72b110a768dc7ed36b6ccfcfbce7
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu16_04-x64/libcudnn8_8.0.0.180-1+cuda11.0_amd64.deb
          dev:
            sha256sum: 2d3d81e11804eea3f3423a6289f2bb25e9545c2ca2b5502be0d912236ddb613d
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu16_04-x64/libcudnn8-dev_8.0.0.180-1+cuda11.0_amd64.deb
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz
  centos8:
    template_path: templates/redhat
    # skip_tests: True
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: centos:8
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: f9c9741619a54b1b01e858906dfcc9f58e653e713621c22bab3507dc6c1111e9
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-8.0.0.180-1.cuda11.0.x86_64.rpm
          dev:
            sha256sum: 48a1ff8c4912e7b98b7db63cbb9fef0c4cb7ef3362d8fa7bcb098aa73e35e7b7
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-devel-8.0.0.180-1.cuda11.0.x86_64.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz
    # # CAREFUL! Mixing up the arch "arm64" and the base_image arch image will lead to hard to debug build issues!
    # arm64:
    #   base_image: arm64v8/centos:8
    #   repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
    #   requires: "cuda>=11.0"
    #   exclude_repos:
    #     - nvcr.io
    #   components:
    #     <<: *cuda11_0_components
    #     libnccl2:
    #       version: 2.7.3
    #       sha256sum: eebbaf4d040a0254e1cb9cc23ed46a1ed37fba3686e9d86d541f5b3aa43c0ecb
    #       source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_aarch64.txz
    # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    ppc64le:
      base_image: ppc64le/centos:8
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      requires: "cuda>=11.0"
      exclude_repos:
        - nvcr.io
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: d870ec75857f9ae123fefb966a5d28d0468fbf3150f62a97d7af2dffea6f9d98
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-ppc64le/libcudnn8-8.0.0.180-1.cuda11.0.ppc64le.rpm
          dev:
            sha256sum: 682c991ab050aa8413ad400e4756028a0691b27f3280d566ac57346fd43408cd
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-ppc64le/libcudnn8-devel-8.0.0.180-1.cuda11.0.ppc64le.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: 8486ac373c246f2468c55788597da2eb3b195f5fcdfaf4c3832c78c2849207ee
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_ppc64le.txz
  ubi8:
    template_path: templates/redhat
    # skip_tests: True
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: registry.access.redhat.com/ubi8/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: f9c9741619a54b1b01e858906dfcc9f58e653e713621c22bab3507dc6c1111e9
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-8.0.0.180-1.cuda11.0.x86_64.rpm
          dev:
            sha256sum: 48a1ff8c4912e7b98b7db63cbb9fef0c4cb7ef3362d8fa7bcb098aa73e35e7b7
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-devel-8.0.0.180-1.cuda11.0.x86_64.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz
    # # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    # arm64:
    #   base_image: registry.access.redhat.com/ubi8/ubi@sha256:6f261450afcc6d29198d7fa6deb1b8f36e0e40573d05ca3ca8d89e16a25302b0
    #   repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
    #   requires: "cuda>=11.0"
    #   exclude_repos:
    #     - nvcr.io
    #   components:
    #     <<: *cuda11_0_components
    #     libnccl2:
    #       version: 2.7.3
    #       sha256sum: eebbaf4d040a0254e1cb9cc23ed46a1ed37fba3686e9d86d541f5b3aa43c0ecb
    #       source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_aarch64.txz
    # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    ppc64le:
      base_image: registry.access.redhat.com/ubi8/ubi@sha256:0615adcd8ae2778d6394d1fb6b96ff67165318da5fd6667d450504acb6050d97
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      requires: "cuda>=11.0"
      exclude_repos:
        - nvcr.io
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: d870ec75857f9ae123fefb966a5d28d0468fbf3150f62a97d7af2dffea6f9d98
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-ppc64le/libcudnn8-8.0.0.180-1.cuda11.0.ppc64le.rpm
          dev:
            sha256sum: 682c991ab050aa8413ad400e4756028a0691b27f3280d566ac57346fd43408cd
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-ppc64le/libcudnn8-devel-8.0.0.180-1.cuda11.0.ppc64le.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: 8486ac373c246f2468c55788597da2eb3b195f5fcdfaf4c3832c78c2849207ee
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_ppc64le.txz
  centos7:
    template_path: templates/redhat
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: centos:7
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: b526e21b82ea4ba3fed4864d626ae3ce4474381c38bd733e3f1e869d8fc46f4b
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-8.0.0.180-1.cuda11.0.x86_64.rpm
          dev:
            sha256sum: a87665d666f17d1ce5ec31efdb710a8c853a1a2ca19a86523b50ff681d461e58
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-devel-8.0.0.180-1.cuda11.0.x86_64.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz
  ubi7:
    template_path: templates/redhat
    image_tag_suffix: "-rc"
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: registry.access.redhat.com/ubi7/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: b526e21b82ea4ba3fed4864d626ae3ce4474381c38bd733e3f1e869d8fc46f4b
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-8.0.0.180-1.cuda11.0.x86_64.rpm
          dev:
            sha256sum: a87665d666f17d1ce5ec31efdb710a8c853a1a2ca19a86523b50ff681d461e58
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-devel-8.0.0.180-1.cuda11.0.x86_64.rpm
        libnccl2:
          version: 2.7.3
          sha256sum: d112b722bf557cff96d571ac3386e4f539be7b3e9412561bde59b0ad6e59263d
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda11.0_x86_64.txz

.requires_v10.2: &cuda10_2_requires
  requires: "cuda>=10.2 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441"

.components_v10.2: &cuda10_2_components
  build_version: 89
  libnccl2:
    version: 2.6.4
  cudnn7:
    version: 7.6.5.32

cuda_v10.2:
  dist_base_path: dist/10.2
  ubuntu18.04:
    template_path: templates/ubuntu
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: ubuntu:18.04
      no_os_suffix: True
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: a03ebe74e0d3b73b96cb0f7814befa4d5a15af87488b1e947086136670032723
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-x64/libcudnn8_8.0.0.180-1+cuda10.2_amd64.deb
          dev:
            sha256sum: 0ee2e9aa60f0e1301b28f9fb826bb8c1cc75b1d90410933169b36ba394f9e9c5
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-x64/libcudnn8-dev_8.0.0.180-1+cuda10.2_amd64.deb
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
    ppc64le:
      # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
      base_image: ppc64le/ubuntu:18.04
      no_os_suffix: True
      requires: "cuda>=10.2"
      exclude_repos:
        - nvcr.io
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 9ae85c121c559ceab6f383420724c1c2b9c505ae1b418d4aa2709ae7feb4a4fc
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-ppc64le/libcudnn8_8.0.0.180-1+cuda10.2_ppc64el.deb
          dev:
            sha256sum: 5e52dd091c561c4ec6e72a569091de545e07d8e770a40fb9ba212946caa827c7
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu18_04-ppc64le/libcudnn8-dev_8.0.0.180-1+cuda10.2_ppc64el.deb
        libnccl2:
          version: 2.7.3
          sha256sum: ccd4960ef3eb22f0ed8fcb91d3b8ae71e7c88cf8fb6eca8f5c039d0acf1bdac8
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_ppc64le.txz
    arm64:
      # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
      base_image: arm64v8/ubuntu:18.04
      no_os_suffix: True
      repo_url: http://cuda-repo.nvidia.com/release-candidates/kitbundles/r10.2/20200604/repos/ubuntu1804/arm64
      requires: "cuda>=10.2"
      exclude_repos:
        - docker.io
        - nvcr.io
      components:
        build_version: 184
        command_line_tools:
          version: 10.2.20200604-1
        libnpp:
          version: 10.2.1.184-1
        libnpp_dev:
          version: 10.2.1.184-1
        libraries:
          version: 10.2.20200604-1
        libraries_dev:
          version: 10.2.20200604-1
        minimal_build:
          version: 10.2.20200604-1
        cudnn8:
          version: 8.0.0.180
          sha256sum: 899405cf41d55e11b9000a25ac70c5523307b06eaad90ef603468bc08c7e0ddb
          source: http://cuda-repo/release-candidates/Libraries/cuDNN/v8.0/8.0.0.180_20200523_28443629/10.2.89-r440/Installer/Ubuntu18_04-aarch64/libcudnn8_8.0.0.180-1+cuda10.2_arm64.deb
          dev:
            sha256sum: 4b581303d1515d9a204b6639dd0bfee3b27571602f289abe707350abbe3a268d
            source: http://cuda-repo/release-candidates/Libraries/cuDNN/v8.0/8.0.0.180_20200523_28443629/10.2.89-r440/Installer/Ubuntu18_04-aarch64/libcudnn8-dev_8.0.0.180-1+cuda10.2_arm64.deb
  ubuntu16.04:
    template_path: templates/ubuntu
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: ubuntu:16.04
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 089ef933634e5f6a76b0de3deb27e700c4de5784d275563c56b3ce275aeb3985
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu16_04-x64/libcudnn8_8.0.0.180-1+cuda10.2_amd64.deb
          dev:
            sha256sum: 1d24e837c48b7176cc61d589780534808d01e7cf7f270e38797b8786cfa37104
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/Ubuntu16_04-x64/libcudnn8-dev_8.0.0.180-1+cuda10.2_amd64.deb
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
  centos8:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: centos:8
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 2ea2e2d302814d8661c6dbf3dc102a874ac1829071eb5503aa0206bfb763cc8d
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-8.0.0.180-1.cuda10.2.x86_64.rpm
          dev:
            sha256sum: 708150ad9eb6a680cd64b50904a69eb6a1ce1810c261515c65451c11dd002ddf
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-devel-8.0.0.180-1.cuda10.2.x86_64.rpm
        cudnn7:
          version: "7.6.5.32"
          sha256sum: "600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20"
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
  ubi8:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: registry.access.redhat.com/ubi8/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 2ea2e2d302814d8661c6dbf3dc102a874ac1829071eb5503aa0206bfb763cc8d
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-8.0.0.180-1.cuda10.2.x86_64.rpm
          dev:
            sha256sum: 708150ad9eb6a680cd64b50904a69eb6a1ce1810c261515c65451c11dd002ddf
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL8_1-x64/libcudnn8-devel-8.0.0.180-1.cuda10.2.x86_64.rpm
        cudnn7:
          version: "7.6.5.32"
          sha256sum: "600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20"
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
  centos7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: centos:7
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 69e34d3ff38619392c61d3f1a6144ed2e7835d3b6c8c867b8a3f44eb0b20df94
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-8.0.0.180-1.cuda10.2.x86_64.rpm
          dev:
            sha256sum: e3c88e739ddb3ecef4120e224b12e73ff353dbdc54396d43bded1fd63ae2457f
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-devel-8.0.0.180-1.cuda10.2.x86_64.rpm
        cudnn7:
          version: "7.6.5.32"
          sha256sum: "600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20"
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
    ppc64le:
      # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
      base_image: ppc64le/centos:7
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=10.2"
      exclude_repos:
        - nvcr.io
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: c1c918e022bd9da19d0d74a773c4f4e57552b9cd128d2639020e01c68a7a2e4e
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-ppc64le/libcudnn8-8.0.0.180-1.cuda10.2.ppc64le.rpm
          dev:
            sha256sum: 2a812832887b686b0af1de304dc200d0bb273bfaebcca9de95c7c92106ae4cb1
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-ppc64le/libcudnn8-devel-8.0.0.180-1.cuda10.2.ppc64le.rpm
        cudnn7:
          version: "7.6.5.32"
          sha256sum: "7dc08b6ab9331bfd12207d4802c61db1ad7cace7395b67a6e7b16efa0335668b"
        libnccl2:
          version: 2.7.3
          sha256sum: ccd4960ef3eb22f0ed8fcb91d3b8ae71e7c88cf8fb6eca8f5c039d0acf1bdac8
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_ppc64le.txz
  ubi7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      base_image: registry.access.redhat.com/ubi7/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        cudnn8:
          version: 8.0.0.180
          sha256sum: 69e34d3ff38619392c61d3f1a6144ed2e7835d3b6c8c867b8a3f44eb0b20df94
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-8.0.0.180-1.cuda10.2.x86_64.rpm
          dev:
            sha256sum: e3c88e739ddb3ecef4120e224b12e73ff353dbdc54396d43bded1fd63ae2457f
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.0/RHEL7_3-x64/libcudnn8-devel-8.0.0.180-1.cuda10.2.x86_64.rpm
        cudnn7:
          version: "7.6.5.32"
          sha256sum: "600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20"
        libnccl2:
          version: 2.7.3
          sha256sum: a9ee790c3fc64b0ecbb00db92eddc1525552eda10a8656ff4b7380f66d81bda1
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.3-1+cuda10.2_x86_64.txz
