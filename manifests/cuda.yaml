---

push_repos:
  artifactory:
    only_if: NV_ARTIFACTORY
    user: ARTIFACTORY_USER
    pass: ARTIFACTORY_PASS
    registry:
      x86_64: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda
      ppc64le: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda/cuda-ppc64le
      arm64: urm.nvidia.com/sw-gpu-cuda-installer-docker-local/cuda/cuda-arm64
  nvcr.io:
    only_if: NVCR_TOKEN
    pass: NVCR_TOKEN
    user: $oauthtoken
    registry:
      x86_64: nvcr.io/nvidia/cuda
      ppc64le: nvcr.io/nvidia/cuda-ppc64le
      arm64: nvcr.io/nvidia/cuda-arm64
  docker.io:
    # Will only use this repo if the REGISTRY_TOKEN environment variable is set
    only_if: REGISTRY_TOKEN
    pass: REGISTRY_TOKEN
    user: REGISTRY_USER
    registry:
      x86_64: nvidia/cuda
      ppc64le: nvidia/cuda-ppc64le
      arm64: nvidia/cuda-arm64


.requires_v11.1: &cuda11_1_requires
  requires: "cuda>=11.1 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441"


.components_v11.1: &cuda11_1_components
  build_version: 0
  cudart:
    version: 11.1.74-1
  cudart_dev:
    version: 11.1.74-1
  nvml_dev:
    version: 11.1.74-1
  command_line_tools:
    version: 11.1.0-1
  libcublas:
    version: 11.2.1.74-1
  libcublas_dev:
    version: 11.2.1.74-1
  libnpp:
    version: 11.1.1.269-1
  libnpp_dev:
    version: 11.1.1.269-1
  libraries:
    version: 11.1.0-1
  libraries_dev:
    version: 11.1.0-1
  minimal_build:
    version: 11.1.0-1
  nvtx:
    version: 11.1.74-1
  nvprof:
    version: 11.1.69-1
  nvcc:
    version: 11.1.74-1
  libcusparse:
    version: 11.2.0.275-1
  libcusparse_dev:
    version: 11.2.0.275-1
  libnccl2:
    version: 2.7.8-1
  libnccl2_dev:
    version: 2.7.8-1
  cudnn8:
    version: 8.0.4.30-1


cuda_v11.1:
  dist_base_path: dist/11.1
  ubuntu20.04:
    template_path: templates/ubuntu
    base_image: ubuntu:20.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu2004/x86_64
      latest: True
      no_os_suffix: True
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
        # cuDNN for Ubuntu 20.04 has not been published yet.
        cudnn8:
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
    # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/ppc64el
      latest: True
      no_os_suffix: True
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/sbsa
      latest: True
      no_os_suffix: True
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
        # No cuDNN for arm
        cudnn8:
  ubuntu16.04:
    template_path: templates/ubuntu
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: ubuntu:16.04
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
  centos8:
    template_path: templates/redhat
    base_image: centos:8
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/ppc64le
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: 387db4f67b7bd41c81644bbbedaf5f5c5453fa4c0876ffabaade75e5c2e0da80
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-8.0.4.30-1.cuda11.1.ppc64le.rpm
          dev:
            sha256sum: 9626e2cd27e9fa878ce549b61af91dadc6a8a96e76f1202b8e229beac9f207b2
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda11.1.ppc64le.rpm
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/sbsa
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
        # No cudnn for arm
        cudnn8:
  centos7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: centos:7
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
  ubi8:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi8/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/ppc64le
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: 387db4f67b7bd41c81644bbbedaf5f5c5453fa4c0876ffabaade75e5c2e0da80
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-8.0.4.30-1.cuda11.1.ppc64le.rpm
          dev:
            sha256sum: 9626e2cd27e9fa878ce549b61af91dadc6a8a96e76f1202b8e229beac9f207b2
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda11.1.ppc64le.rpm
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/sbsa
      requires: "cuda>=11.1"
      components:
        <<: *cuda11_1_components
        # No cudnn for arm
        cudnn8:
  ubi7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: registry.access.redhat.com/ubi7/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda11_1_requires
      components:
        <<: *cuda11_1_components


.requires_v11.0: &cuda11_0_requires
  requires: "cuda>=11.0 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441"


.components_v11.0: &cuda11_0_components
  build_version: 3
  cudart:
    version: 11.0.221-1
  cudart_dev:
    version: 11.0.221-1
  nvml_dev:
    version: 11.0.167-1
  command_line_tools:
    version: 11.0.3-1
  libcublas:
    version: 11.2.0.252-1
  libcublas_dev:
    version: 11.2.0.252-1
  libnpp:
    version: 11.1.0.245-1
  libnpp_dev:
    version: 11.1.0.245-1
  libraries:
    version: 11.0.3-1
  libraries_dev:
    version: 11.0.3-1
  minimal_build:
    version: 11.0.3-1
  nvtx:
    version: 11.0.167-1
  nvprof:
    version: 11.0.221-1
  nvcc:
    version: 11.0.221-1
  libcusparse:
    version: 11.1.1.245-1
  libcusparse_dev:
    version: 11.1.1.245-1
  libnccl2:
    version: 2.7.8-1
  libnccl2_dev:
    version: 2.7.8-1
  cudnn8:
    version: 8.0.4.30-1


cuda_v11.0:
  dist_base_path: dist/11.0
  ubuntu20.04:
    template_path: templates/ubuntu
    base_image: ubuntu:20.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      # NOTE: Wed Sep 30 17:49 2020: ml repo for 20.04 exists, but does not contain packages for 11.0
      # ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu2004/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
        # cuDNN for Ubuntu 20.04 has not been published yet.
        cudnn8:
        libnccl2:
          version: 2.7.8
          sha256sum: 34000cbe6a0118bfd4ad898ebc5f59bf5d532bbf2453793891fa3f1621e25653
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.8-1+cuda11.0_x86_64.txz
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
    # CAREFUL! Mixing up the arch and the base_image arch image will lead to hard to debug build issues!
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/ppc64el
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/sbsa
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
        # No cuDNN for arm
        cudnn8:
  ubuntu16.04:
    template_path: templates/ubuntu
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: ubuntu:16.04
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
  centos8:
    template_path: templates/redhat
    base_image: centos:8
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/ppc64le
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: 55c6a64437a559eb1fdabcd1b176eb343030a9c18b92a0207328562a6b75e712
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-8.0.4.30-1.cuda11.0.ppc64le.rpm
          dev:
            sha256sum: ae2cfea83dd3d3c529368c6e97e68f071d98ab8bb481fb0994729e065fd335b8
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda11.0.ppc64le.rpm
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/sbsa
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
        # No cudnn for arm
        cudnn8:
  centos7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: centos:7
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
  ubi8:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi8/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/ppc64le
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: 55c6a64437a559eb1fdabcd1b176eb343030a9c18b92a0207328562a6b75e712
          source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-8.0.4.30-1.cuda11.0.ppc64le.rpm
          dev:
            sha256sum: ae2cfea83dd3d3c529368c6e97e68f071d98ab8bb481fb0994729e065fd335b8
            source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL8_1-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda11.0.ppc64le.rpm
    arm64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-arm64
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/sbsa
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/sbsa
      requires: "cuda>=11.0"
      components:
        <<: *cuda11_0_components
        # No cudnn for arm
        cudnn8:
  ubi7:
    template_path: templates/redhat
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      base_image: registry.access.redhat.com/ubi7/ubi:latest
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda11_0_requires
      components:
        <<: *cuda11_0_components


.requires_v10.2: &cuda10_2_requires
  requires: "cuda>=10.2 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441"


.components_v10.2: &cuda10_2_components
  build_version: 89
  libcublas:
    version: 10.2.2.89-1
  libcublas_dev:
    version: 10.2.2.89-1
  libnccl2:
    version: 2.7.8-1
  libnccl2_dev:
    version: 2.7.8-1
  cudnn8:
    version: 8.0.4.30-1
  cudnn7:
    version: 7.6.5.32-1


cuda_v10.2:
  dist_base_path: dist/10.2
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64
      no_os_suffix: True
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/ppc64el
      no_os_suffix: True
      requires: "cuda>=10.2"
      components:
        <<: *cuda10_2_components
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
  centos8:
    template_path: templates/redhat
    base_image: centos:8
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        # cudnn7 is not in the ML repo for rhel8
        cudnn7:
          version: 7.6.5.32
          sha256sum: 600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.33-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.2"
      components:
        <<: *cuda10_2_components
        # cudnn8:
        #   version: 8.0.4.30
        #   sha256sum: c7456bc1d4ce982969a6b2aeae011275bcf8fbadf7dc7cbd136f5820f0ab5fe4
        #   source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL7_3-ppc64le/libcudnn8-8.0.4.30-1.cuda10.2.ppc64le.rpm
        #   dev:
        #     sha256sum: f445312fc30c2ca36cf17b85b2d39817e510db867d9484af439bb80762f67eea
        #     source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL7_3-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda10.2.ppc64le.rpm
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda10_2_requires
  #     components:
  #       <<: *cuda10_2_components
  #       cudnn8:
  #         version: 8.0.4.30
  #         sha256sum: c12c69eb16698eacac40aa46b9ce399d4cd86efb6ff0c105142f8a28fcfb980e
  #       cudnn7:
  #         version: 7.6.5.32
  #         sha256sum: 600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20
  ubi8:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi8/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        # cudnn7 is not in the ML repo for rhel8
        cudnn7:
          version: 7.6.5.32
          sha256sum: 600267f2caaed2fd58eb214ba669d8ea35f396a7d19b94822e6b36f9f7088c20
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_2_requires
      components:
        <<: *cuda10_2_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.33-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.2"
      components:
        <<: *cuda10_2_components
        # cudnn8:
        #   version: 8.0.4.30
        #   sha256sum: c7456bc1d4ce982969a6b2aeae011275bcf8fbadf7dc7cbd136f5820f0ab5fe4
        #   source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL7_3-ppc64le/libcudnn8-8.0.4.30-1.cuda10.2.ppc64le.rpm
        #   dev:
        #     sha256sum: f445312fc30c2ca36cf17b85b2d39817e510db867d9484af439bb80762f67eea
        #     source: https://developer.download.nvidia.com/compute/redist/cudnn/v8.0.4/RHEL7_3-ppc64le/libcudnn8-devel-8.0.4.30-1.cuda10.2.ppc64le.rpm


.requires_v10.1: &cuda10_1_requires
  requires: "cuda>=10.1 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411 brand=tesla,driver>=418,driver<419"


.components_v10.1: &cuda10_1_components
  build_version: 243
  libcublas:
    version: 10.2.1.243-1
  libcublas_dev:
    version: 10.2.1.243-1
  libnccl2:
    version: 2.7.8-1
  libnccl2_dev:
    version: 2.7.8-1
  cudnn8:
    version: 8.0.4.30-1
  cudnn7:
    version: 7.6.5.32-1


cuda_v10.1:
  dist_base_path: dist/10.1
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64
      no_os_suffix: True
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/ppc64el
      no_os_suffix: True
      requires: "cuda>=10.1"
      components:
        <<: *cuda10_1_components
        cudnn8:
          version: 8.0.3.33-1
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
  centos8:
    template_path: templates/redhat
    base_image: centos:8
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: eb4b888e61715168f57a0a0a21c281ada6856b728e5112618ed15f8637487715
        # cudnn7 and nccl are not in the ML repo for rhel8
        cudnn7:
          version: 7.6.5.32
          sha256sum: 7eaec8039a2c30ab0bc758d303588767693def6bf49b22485a2c00bf2e136cb3
        libnccl2:
          version: 2.7.8
          sha256sum: 673535e03774aff57806fcc092b72b049e6303d48b8dfaafa3247a2b1c538ef6
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.8-1+cuda10.1_x86_64.txz
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.32-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.1"
      components:
        <<: *cuda10_1_components
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda10_1_requires
  #     components:
  #       <<: *cuda10_1_components
  #       cudnn8:
  #         version: 8.0.4.30
  #         sha256sum: eb4b888e61715168f57a0a0a21c281ada6856b728e5112618ed15f8637487715
  #       cudnn7:
  #         version: 7.6.5.32
  #         sha256sum: 7eaec8039a2c30ab0bc758d303588767693def6bf49b22485a2c00bf2e136cb3
  ubi8:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi8/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel8/x86_64
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
        cudnn8:
          version: 8.0.4.30
          sha256sum: eb4b888e61715168f57a0a0a21c281ada6856b728e5112618ed15f8637487715
        # cudnn7 is not in the ML repo for rhel8
        cudnn7:
          version: 7.6.5.32
          sha256sum: 7eaec8039a2c30ab0bc758d303588767693def6bf49b22485a2c00bf2e136cb3
        libnccl2:
          version: 2.7.8
          sha256sum: 673535e03774aff57806fcc092b72b049e6303d48b8dfaafa3247a2b1c538ef6
          source: https://developer.download.nvidia.com/compute/redist/nccl/v2.7/nccl_2.7.8-1+cuda10.1_x86_64.txz
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_1_requires
      components:
        <<: *cuda10_1_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.32-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.1"
      components:
        <<: *cuda10_1_components
        # cudnn8:
        #   version: 8.0.4.30
        #   sha256sum: 690811bbf04adef635f4a6f480575fc2a558c4a2c98c85c7090a3a8c60dacea9


.requires_v10.0: &cuda10_0_requires
  requires: "cuda>=10.0 brand=tesla,driver>=384,driver<385 brand=tesla,driver>=410,driver<411"

.components_v10.0: &cuda10_0_components
  build_version: 130
  libcublas:
    version: 10.1.0.105-1
  libcublas_dev:
    version: 10.1.0.105-1
  libnccl2:
    version: 2.6.4-1
  libnccl2_dev:
    version: 2.6.4-1
  cudnn7:
    version: 7.6.5.32-1


cuda_v10.0:
  dist_base_path: dist/10.0
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64
      no_os_suffix: True
      <<: *cuda10_0_requires
      components:
        <<: *cuda10_0_components
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/ppc64el
      no_os_suffix: True
      requires: "cuda>=10.0"
      components:
        <<: *cuda10_0_components
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda10_0_requires
      components:
        <<: *cuda10_0_components
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_0_requires
      components:
        <<: *cuda10_0_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.32-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.0"
      components:
        <<: *cuda10_0_components
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda10_0_requires
  #     components:
  #       <<: *cuda10_0_components
  #       cudnn7:
  #         version: 7.6.5.32
  #         sha256sum: 28355e395f0b2b93ac2c83b61360b35ba6cd0377e44e78be197b6b61b4b492ba
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/x86_64
      <<: *cuda10_0_requires
      components:
        <<: *cuda10_0_components
        # TODO: version is different for rhel7
        cudnn7:
          version: 7.6.5.32-1
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/rhel7/ppc64le
      requires: "cuda>=10.0"
      components:
        <<: *cuda10_0_components


.requires_v9.2: &cuda9_2_requires
  requires: "cuda>=9.2"


.components_v9.2: &cuda9_2_components
  build_version: 148


cuda_v9.2:
  dist_base_path: dist/9.2
  ubuntu18.04:
    template_path: templates/ubuntu
    base_image: ubuntu:18.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      # Yes, these repo urls are correct in this case...
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1710/x86_64/
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      no_os_suffix: True
      <<: *cuda9_2_requires
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32-1
        libnccl2:
          version: 2.4.8-1
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      <<: *cuda9_2_requires
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32-1
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_2_requires
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: a2a2c7a8ba7b16d323b651766ee37dcfdbc2b50d920f73f8fde85005424960e4
        libnccl2:
          version: 2.4.8
          sha256sum: 504addb27ccdfa4402643443c9b72bcf50ed81308e7e2c1187308195a3f1f0e3
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.2"
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: a11f44f9a827b7e69f527a9d260f1637694ff7c1674a3e46bd9ec054a08f9a76
        libnccl2:
          version: 2.4.8
          sha256sum: 9c51cc56cec85703fa748bfba5e517cea22b7371fa059a316beaf0e9e021b473
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda9_2_requires
  #     components:
  #       <<: *cuda9_2_components
  #       cudnn7:
  #         version: 7.6.5.32
  #         sha256sum: a2a2c7a8ba7b16d323b651766ee37dcfdbc2b50d920f73f8fde85005424960e4
  #       libnccl2:
  #         version: 2.4.8
  #         sha256sum: 9c51cc56cec85703fa748bfba5e517cea22b7371fa059a316beaf0e9e021b473
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_2_requires
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: a2a2c7a8ba7b16d323b651766ee37dcfdbc2b50d920f73f8fde85005424960e4
        libnccl2:
          version: 2.4.8
          sha256sum: 504addb27ccdfa4402643443c9b72bcf50ed81308e7e2c1187308195a3f1f0e3
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.2"
      components:
        <<: *cuda9_2_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: a11f44f9a827b7e69f527a9d260f1637694ff7c1674a3e46bd9ec054a08f9a76
        libnccl2:
          version: 2.4.8
          sha256sum: 9c51cc56cec85703fa748bfba5e517cea22b7371fa059a316beaf0e9e021b473


.requires_v9.1: &cuda9_1_requires
  requires: "cuda>=9.1"


.components_v9.1: &cuda9_1_components
  build_version: 85


cuda_v9.1:
  dist_base_path: dist/9.1
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      no_os_suffix: True
      <<: *cuda9_1_requires
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.1.2.21
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/ppc64el
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/ppc64el
      no_os_suffix: True
      <<: *cuda9_1_requires
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.1.3.16
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_1_requires
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.1.2
          sha256sum: c61000ed700bc5a009bc2e135bbdf736c9743212b2174a2fc9018a66cc0979ec
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.1"
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.0.5
          sha256sum: 68834ffe96c91fa1b13517a4b5b0358f8433ed2d30f146b7bb41dd0ea50c55ce
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda9_1_requires
  #     components:
  #       <<: *cuda9_1_components
  #       cudnn7:
  #         version: 7.1.2
  #         sha256sum: c61000ed700bc5a009bc2e135bbdf736c9743212b2174a2fc9018a66cc0979ec
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_1_requires
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.1.2
          sha256sum: c61000ed700bc5a009bc2e135bbdf736c9743212b2174a2fc9018a66cc0979ec
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.1"
      components:
        <<: *cuda9_1_components
        cudnn7:
          version: 7.0.5
          sha256sum: 68834ffe96c91fa1b13517a4b5b0358f8433ed2d30f146b7bb41dd0ea50c55ce


.requires_v9.0: &cuda9_0_requires
  requires: "cuda>=9.0"


.components_v9.0: &cuda9_0_components
  build_version: 176


cuda_v9.0:
  dist_base_path: dist/9.0
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      no_os_suffix: True
      <<: *cuda9_0_requires
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.6.4.38
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/ppc64el
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/ppc64el
      no_os_suffix: True
      <<: *cuda9_0_requires
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.2.1.38
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_0_requires
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: bd0a4c0090d5b02feec3f195738968690cc2470b9bc6026e6fe8ff245cd261c8
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.0"
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.2.1.38
          sha256sum: 4c0937b5618cb0d1d7eed195b3a4ba6a49e061f9e734f5702b030c8522cdfc9c
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda9_0_requires
  #     components:
  #       <<: *cuda9_0_components
  #       cudnn7:
  #         version: 7.6.5.32
  #         sha256sum: bd0a4c0090d5b02feec3f195738968690cc2470b9bc6026e6fe8ff245cd261c8
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda9_0_requires
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.6.5.32
          sha256sum: bd0a4c0090d5b02feec3f195738968690cc2470b9bc6026e6fe8ff245cd261c8
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=9.0"
      components:
        <<: *cuda9_0_components
        cudnn7:
          version: 7.2.1.38
          sha256sum: 4c0937b5618cb0d1d7eed195b3a4ba6a49e061f9e734f5702b030c8522cdfc9c


.requires_v8.0: &cuda8_0_requires
  requires: "cuda>=8.0"


.components_v8.0: &cuda8_0_components
  build_version: 61


cuda_v8.0:
  dist_base_path: dist/8.0
  ubuntu16.04:
    template_path: templates/ubuntu
    base_image: ubuntu:16.04
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64
      no_os_suffix: True
      <<: *cuda8_0_requires
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.2.1.38
        cudnn6:
          version: 6.0.21
        cudnn5:
          version: 5.1.10
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/ppc64el
      ml_repo_url: https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/ppc64el
      no_os_suffix: True
      <<: *cuda8_0_requires
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.0.3.11
        cudnn6:
          version: 6.0.21
        cudnn5:
          version: 5.1.10
  centos7:
    template_path: templates/redhat
    base_image: centos:7
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda8_0_requires
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.1.2.21
          sha256sum: a5dfd656811fe9c43d87c40338cec5e1a85ad5a9cd3b5f1e95dd67d5e126aacc
        cudnn6:
          version: 6.0.21
          sha256sum: 9b09110af48c9a4d7b6344eb4b3e344daa84987ed6177d5c44319732f3bb7f9c
        cudnn5:
          version: 5.1.10
          sha256sum: c10719b36f2dd6e9ddc63e3189affaa1a94d7d027e63b71c3f64d449ab0645ce
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=8.0"
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.0.2.38
          sha256sum: 7bc1452c9ac5ab4fda03e3226c83202c6c85431e2a3a51dce67ac0da6ffa45a8
        cudnn6:
          version: 6.0.21
          sha256sum: bb32b7eb8bd1edfd63b39fb8239bba2e9b4d0b3b262043a5c6b41fa1ea1c1472
        cudnn5:
          version: 5.1.10
          sha256sum: 663aac0328f821d90ae9c74ee43e90751706546c2ce769ea9c96f92864300af6
  # centos6:
  #   template_path: templates/redhat
  #   base_image: centos:6
  #   push_repos:
  #     - artifactory
  #     - docker.io
  #     - nvcr.io
  #   x86_64:
  #     image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
  #     repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64
  #     <<: *cuda8_0_requires
  #     components:
  #       <<: *cuda8_0_components
  #       cudnn7:
  #         version: 7.1.2.21
  #         sha256sum: a5dfd656811fe9c43d87c40338cec5e1a85ad5a9cd3b5f1e95dd67d5e126aacc
  #       cudnn6:
  #         version: 6.0.21
  #         sha256sum: 9b09110af48c9a4d7b6344eb4b3e344daa84987ed6177d5c44319732f3bb7f9c
  #       cudnn5:
  #         version: 5.1.10
  #         sha256sum: c10719b36f2dd6e9ddc63e3189affaa1a94d7d027e63b71c3f64d449ab0645ce
  ubi7:
    template_path: templates/redhat
    base_image: registry.access.redhat.com/ubi7/ubi:latest
    push_repos:
      - artifactory
      - docker.io
      - nvcr.io
    x86_64:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64
      <<: *cuda8_0_requires
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.1.2.21
          sha256sum: a5dfd656811fe9c43d87c40338cec5e1a85ad5a9cd3b5f1e95dd67d5e126aacc
        cudnn6:
          version: 6.0.21
          sha256sum: 9b09110af48c9a4d7b6344eb4b3e344daa84987ed6177d5c44319732f3bb7f9c
        cudnn5:
          version: 5.1.10
          sha256sum: c10719b36f2dd6e9ddc63e3189affaa1a94d7d027e63b71c3f64d449ab0645ce
    ppc64le:
      image_name: gitlab-master.nvidia.com:5005/cuda-installer/cuda/cuda-ppc64le
      repo_url: https://developer.download.nvidia.com/compute/cuda/repos/rhel7/ppc64le
      requires: "cuda>=8.0"
      components:
        <<: *cuda8_0_components
        cudnn7:
          version: 7.0.2.38
          sha256sum: 7bc1452c9ac5ab4fda03e3226c83202c6c85431e2a3a51dce67ac0da6ffa45a8
        cudnn6:
          version: 6.0.21
          sha256sum: bb32b7eb8bd1edfd63b39fb8239bba2e9b4d0b3b262043a5c6b41fa1ea1c1472
        cudnn5:
          version: 5.1.10
          sha256sum: 663aac0328f821d90ae9c74ee43e90751706546c2ce769ea9c96f92864300af6
