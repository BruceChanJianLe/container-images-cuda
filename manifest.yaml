---
docker_repos:
  docker.io:
    # Will only use this repo if the REGISTRY_TOKEN environment variable is set
    only_if: REGISTRY_TOKEN
    pass: REGISTRY_TOKEN
    user: REGISTRY_USER
    registry: docker.io
  nvcr.io:
    only_if: NVCR_TOKEN
    pass: NVCR_TOKEN
    user: $oauthtoken
    registry: nvcr.io/nvidian
  gitlab-internal:
    only_if: NV_CI_INTERNAL
    user: "gitlab-ci-token"
    pass: CI_JOB_TOKEN
    registry: gitlab-master.nvidia.com:5005

redhat6: &redhat6_definition
  template_path: redhat
  cuda:
    repo_url: "http://developer.download.nvidia.com/compute/cuda/repos/rhel6/x86_64"
    v10.0:
      build_version: 130
      requires: "brand=tesla,driver>=384,driver<385 brand=tesla,driver>=410,driver<411"
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "c4e1ee4168f4cadabaa989487a47bed09f34d34e35398b6084a2699d11bd2560"
    v10.1:
      build_version: 168
      requires: "brand=tesla,driver>=384,driver<385 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411"
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "e956c6f9222fcb867a10449cfc76dee5cfd7c7531021d95fe9586d7e043b57d7"
    v9.2:
      build_version: 168
      requires: "brand=tesla,driver>=384,driver<385 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411"
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "e956c6f9222fcb867a10449cfc76dee5cfd7c7531021d95fe9586d7e043b57d7"
    v9.1:
      build_version: 85
      cudnn7:
        version: "7.1.2.21"
        sha256sum: "c61000ed700bc5a009bc2e135bbdf736c9743212b2174a2fc9018a66cc0979ec"
    v9.0:
      build_version: 176
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "90659ea77734b7b671afe930c9898d21a13b888998f1dd3940cc57d6b2f29b86"

redhat7: &redhat7_definition
  template_path: redhat
  cuda:
    repo_url: "http://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64"
    v10.0:
      build_version: 130
      requires: "brand=tesla,driver>=384,driver<385 brand=tesla,driver>=410,driver<411"
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "c4e1ee4168f4cadabaa989487a47bed09f34d34e35398b6084a2699d11bd2560"
    v10.1:
      build_version: 168
      requires: "brand=tesla,driver>=384,driver<385 brand=tesla,driver>=396,driver<397 brand=tesla,driver>=410,driver<411"
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "e956c6f9222fcb867a10449cfc76dee5cfd7c7531021d95fe9586d7e043b57d7"
    v9.2:
      build_version: 148
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "ff028e6f07349445c16fef704a90bccb0992c3e012bba66ab1da352bad55b304"
    v9.1:
      build_version: 85
      cudnn7:
        version: "7.1.2.21"
        sha256sum: "c61000ed700bc5a009bc2e135bbdf736c9743212b2174a2fc9018a66cc0979ec"
    v9.0:
      build_version: 176
      cudnn7:
        version: "7.6.0.64"
        sha256sum: "90659ea77734b7b671afe930c9898d21a13b888998f1dd3940cc57d6b2f29b86"

centos6:
  base_image: centos:6
  <<: *redhat6_definition

centos7:
  base_image: centos:7
  <<: *redhat7_definition

ubi7:
  base_image: registry.access.redhat.com/ubi7/ubi:latest
  exclude_repos:
    - docker.io
  <<: *redhat7_definition
